(function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],f=0,h=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/chatai/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"029a":function(e,t,n){},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4c8f":function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */n("a4d3"),n("e01a"),n("d28b"),n("c975"),n("a15b"),n("fb6a"),n("c19f"),n("ace4"),n("b64b"),n("d3b7"),n("8a79"),n("3ca3"),n("1276"),n("2ca0"),n("ddb0");var o={__dict:{},length:0,setItem:function(e,t){o.__dict[e]=t,o.length=Object.keys(o.__dict).length},getItem:function(e){return o.__dict[e]},removeItem:function(e){delete o.__dict[e],o.length=Object.keys(o.__dict).length},key:function(e){return Object.keys(o.__dict)[e]},clear:function(){o.__dict={},o.length=0}};t.localStorage=o;var r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{l(o.next(e))}catch(t){a(t)}}function s(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,s)}l((o=o.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,o&&(r=2&a[0]?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});n("b333"),n("eb7e");var i=n("350f"),s=n("5508"),l=n("931f"),c="/",u="tensorflowjs_models",f="info",h="model_topology",d="weight_specs",g="weight_data",p="model_metadata";function y(){for(var e=o,t=[],n=0;n<e.length;++n){var r=e.key(n),a=u+c;if(r.startsWith(a)&&r.length>a.length){e.removeItem(r);var i=v(r);-1===t.indexOf(i)&&t.push(i)}}return t}function m(e){return{info:[u,e,f].join(c),topology:[u,e,h].join(c),weightSpecs:[u,e,d].join(c),weightData:[u,e,g].join(c),modelMetadata:[u,e,p].join(c)}}function v(e){var t=e.split(c);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(c)}function S(e){return e.startsWith(b.URL_SCHEME)?e.slice(b.URL_SCHEME.length):e}t.purgeLocalStorageArtifacts=y;var b=function(){function e(e){if(this.LS=o,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=m(this.modelPath)}return e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,n,o;return a(this,(function(r){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),o=i.getModelArtifactsInfoForJSON(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,i.arrayBufferToBase64String(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch(a){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return r(this,void 0,void 0,(function(){var e,t,n,o,r,s,l;return a(this,(function(a){if(e=JSON.parse(this.LS.getItem(this.keys.info)),null==e)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},n=JSON.parse(this.LS.getItem(this.keys.topology)),null==n)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)),null==o)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=o,r=this.LS.getItem(this.keys.modelMetadata),null!=r&&(s=JSON.parse(r),t.format=s["format"],t.generatedBy=s["generatedBy"],t.convertedBy=s["convertedBy"],t.userDefinedMetadata=s["userDefinedMetadata"]),l=this.LS.getItem(this.keys.weightData),null==l)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=i.base64StringToArrayBuffer(l),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}();function w(e){return new b(e)}t.BrowserLocalStorage=b,t.localStorageRouter=function(e){return!Array.isArray(e)&&e.startsWith(b.URL_SCHEME)?w(e.slice(b.URL_SCHEME.length)):null},l.IORouterRegistry.registerSaveRouter(t.localStorageRouter),l.IORouterRegistry.registerLoadRouter(t.localStorageRouter),t.browserLocalStorage=w;var _=function(){function e(){this.LS=o}return e.prototype.listModels=function(){return r(this,void 0,void 0,(function(){var e,t,n,o,r,i;return a(this,(function(a){for(e={},t=u+c,n=c+f,o=0;o<this.LS.length;++o)r=this.LS.key(o),r.startsWith(t)&&r.endsWith(n)&&(i=v(r),e[i]=JSON.parse(this.LS.getItem(r)));return[2,e]}))}))},e.prototype.removeModel=function(e){return r(this,void 0,void 0,(function(){var t,n;return a(this,(function(o){if(e=S(e),t=m(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();t.BrowserLocalStorageManager=_;try{s.ModelStoreManagerRegistry.registerManager(b.URL_SCHEME,new _)}catch(L){}},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("bb71");n("da64");o["a"].use(r["a"],{iconfont:"md"});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-toolbar",{attrs:{app:""}},[n("v-toolbar-title",{staticClass:"headline text-uppercase"},[n("span",[e._v("ChatAI")])]),n("v-spacer"),n("v-btn",{attrs:{flat:"",href:"https://github.com/mastro-elfo/chatai",target:"_blank"}},[n("span",{staticClass:"mr-2"},[e._v("Github")])])],1),n("v-content",[n("v-container",[n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.messages,(function(t,o){return n("v-flex",{key:o,attrs:{xs9:"","offset-xs3":"user"==t.type,"mb-5":""}},[n("v-card",{class:"user"==t.type?"text-xs-right":"",attrs:{color:"user"==t.type?"primary":"default",dark:"user"==t.type}},["ai"==t.type?n("v-avatar",[n("v-icon",[e._v("android")])],1):e._e(),"user"==t.type?n("v-avatar",[n("v-icon",[e._v("face")])],1):e._e(),n("v-card-text",[e._v(" "+e._s(t.text)+" ")])],1)],1)})),1)],1)],1),n("v-footer",{attrs:{fixed:"",bottom:0,height:64}},[n("v-container",{attrs:{"pa-0":""}},[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{solo:"","hide-details":"",type:"text",label:"Message",placeholder:"Type a message",autofocus:"","append-icon":""!=e.message?"send":""},on:{"click:append":e.sendMessage,keydown:e.onKeydown},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1)],1)],1)],1)},i=[],s=(n("498a"),n("4de4"),n("7db0"),n("c975"),n("d81d"),n("b64b"),n("d3b7"),n("5319"),n("1276"),n("2909")),l=n("0b53"),c=n("4c8f"),u=null,f=[],h=[],d=[];function g(e){return e.replace(/[.,/#!?$%^&*;:{}=\-_`~()[\]]/g,"").toLowerCase()}function p(e){var t=e.split(" ").filter((function(e,t,n){return n.indexOf(e)==t})).map((function(e){return g(e)}));return h.map((function(e){return-1!==t.indexOf(e)?1:0}))}function y(){console.log("fetch intents"),fetch("intents.json").then((function(e){return e.json()})).then((function(e){f=e.intents}))}function m(){console.log("fetch dictionary"),fetch("dictionary.json").then((function(e){return e.json()})).then((function(e){h=e}))}function v(){console.log("fetch labels"),fetch("labels.json").then((function(e){return e.json()})).then((function(e){d=e}))}function S(){console.log("fetch model"),fetch("model.json").then((function(e){return e.json()})).then((function(e){c["localStorage"].__dict=e,c["localStorage"].length=Object.keys(c["localStorage"].__dict).length,l["a"](Object(c["browserLocalStorage"])("localStorage://model")).then((function(e){u=e}))}))}function b(e){var t=f.find((function(t){return t.tag===e})).responses;return t[Math.floor(Math.random()*t.length)]}function w(){y(),m(),v(),S()}function _(e){if(!u)return"Sorry, I'm disconnected";var t=p(e),n=u.predict(l["b"]([t],[1,t.length])),o=n.dataSync(),r=Math.max.apply(Math,Object(s["a"])(o)),a=d[o.indexOf(r)],i=b(a);return r>.8?i:r>.5?"I think the correct answer is: "+i:"Sorry, I didn't understand"}var L={name:"App",components:{},mounted:function(){w()},updated:function(){o["a"].prototype.$vuetify.goTo("footer",{duration:400,offset:0,easing:"easeInOutCubic"})},methods:{clearMessage:function(){console.info("Clear"),this.message=""},sendMessage:function(){var e=this.message.trim();""!=e&&(console.info('Send "'+e+'"'),this.messages.push({type:"user",text:this.message}),this.message="",this.messages.push({type:"ai",text:_(e)}))},onKeydown:function(e){"Enter"==e.key&&this.sendMessage()}},data:function(){return{message:"",messages:[]}}},I=L,k=(n("cf25"),n("2877")),O=n("6544"),x=n.n(O),M=n("7496"),j=n("8212"),E=n("8336"),B=n("b0af"),T=n("99d9"),C=n("a523"),P=n("549c"),R=n("0e8f"),J=n("553a"),V=n("132d"),D=n("a722"),N=n("9910"),A=n("2677"),F=n("71d9"),H=n("2a7f"),U=Object(k["a"])(I,a,i,!1,null,null,null),W=U.exports;x()(U,{VApp:M["a"],VAvatar:j["a"],VBtn:E["a"],VCard:B["a"],VCardText:T["a"],VContainer:C["a"],VContent:P["a"],VFlex:R["a"],VFooter:J["a"],VIcon:V["a"],VLayout:D["a"],VSpacer:N["a"],VTextField:A["a"],VToolbar:F["a"],VToolbarTitle:H["a"]});n("d1e78");o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(W)}}).$mount("#app")},6:function(e,t){},cf25:function(e,t,n){"use strict";var o=n("029a"),r=n.n(o);r.a}});
//# sourceMappingURL=app.2588a2ad.js.map